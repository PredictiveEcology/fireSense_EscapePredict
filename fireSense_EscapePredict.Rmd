---
title: "fireSense_EscapePredict"
author: "Jean Marchal (jean.d.marchal@gmail.com)"
date: "September 2017"
output: pdf_document
---

# Overview
Predicts fire escape probabilities using a model fitted with the fireSense_EscapeFit module. These can be used to feed the fire escape component of a landscape fire model (e.g fireSense).

# Download the module
```{r download module, eval = FALSE, echo = TRUE}
library(SpaDES)

moduleName <- "fireSense_EscapePredict"

spadesModulesDirectory <- tempdir() # Location where the module will be downloaded

downloadModule(moduleName, path = spadesModulesDirectory)
```

# Usage
## Module parameters
Name|Default|Description
----|:-------|---------------------------------------------------------------------
`modelName`|`"fireSense_EscapeFitted"`|name of the object of class fireSense_EscapeFit describing the statistical model used for predictions.
`data`|`"dataFireSense_EscapePredict"`|a character vector indicating the names of objects in the `simList` environment in which to look for variables present in the model formula. `data` objects can be data.frames, RasterStacks or RasterLayers. However, data.frames cannot be mixed with objects of other classes. If variables are not found in `data` objects, they are searched in the `simList` environment.
`mapping`|`NULL`|optional named vector or list of character strings mapping one or more variables in the model formula to those in `data` objects.
`initialRunTime`|`start(simList)`|when to start this module? By default, the start time of the simulation.
`intervalRunModule`|`NA`|optional. Interval between two runs of this module, expressed in units of simulation time.
|||

```{r module_usage}
library(igraph)
library(SpaDES.core)

moduleDir <- file.path(" # replace with empty string instead")
inputDir <- file.path(moduleDir, "inputs") %>% reproducible::checkPath(create = TRUE)
outputDir <- file.path(moduleDir, "outputs")
cacheDir <- file.path(outputDir, "cache")
times <- list(start = 0, end = 10)
parameters <- list(
  #.progress = list(type = "text", interval = 1), # for a progress bar
  ## If there are further modules, each can have its own set of parameters:
  #module1 = list(param1 = value1, param2 = value2),
  #module2 = list(param1 = value1, param2 = value2)
)
modules <- list("fireSense_EscapePredict")
objects <- list()
paths <- list(
  cachePath = cacheDir,
  modulePath = moduleDir,
  inputPath = inputDir,
  outputPath = outputDir
)

mySim <- simInit(times = times, params = parameters, modules = modules,
                 objects = objects, paths = paths)

spades(mySim)
```

# Events
Events are scheduled as follows:

- Module initiation
- Make predictions

## Saving
TODO: Write what is saved. (there is currently nothing saved, but this may change in the future)

# Data dependencies
## Input data
- **fireSense_EscapeFitted**: an object of class `fireSense_EscapeFit` created with the fireSense_EscapeFit module.
- **dataFireSense_EscapePredict**: one or more data.frames, RasterLayers or RasterStacks in which to look for variables with which to predict.

## Output data
- **fireSense_EscapePredicted**: an object whose class depends on those in input:

Input object class | Output object class
:-:|:-:
`data.frame` | `Numeric vector`
`RasterLayer`<br>`RasterStack` | `RasterLayer`
||


# Links to other modules
Predictions made with this module can be used to feed the fire escape component of a landscape fire model (e.g fireSense).

